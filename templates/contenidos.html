{% extends "navbar.html" %}

{% block title %}Contenidos de {{ materia.nombre_materia }}{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/contenidos.css') }}">
{% endblock %}

{% block body %}
<div class="center-container">
    <div class="title-container">
        <h1>Contenidos de {{ materia.nombre_materia }}</h1>
    </div>

    <div class="professor-container">
        <h2>Profesor: {{ materia.nombre_profesor }}</h2>
    </div>
</div>

<div class="contenidos-container">
    {% for modulo in modulos %}
        <!-- Título del módulo sin funcionalidad desplegable -->
        <h2 class="module-title">{{ modulo.nombre }}</h2>

        <!-- Iteración sobre cada contenido del módulo, creando un details individual -->
        {% for contenido in contenidos %}
            {% if contenido.modulo_id == modulo.id %}
                <details>
                    <summary class="content-title">{{ contenido.titulo }}</summary>
                    <div class="content-body">
                        <p>{{ contenido.descripcion }}</p>

                        {% if contenido.archivo_pdf %}
                            <!-- Mostrar la vista previa del PDF -->
                            <div class="pdf-preview">
                                <iframe src="{{ url_for('static', filename='uploads/' + contenido.archivo_pdf) }}" 
                                        width="100%" height="400px">
                                </iframe>
                            </div>
                        {% else %}
                            <p>No hay PDF disponible para este contenido.</p>
                        {% endif %}
                    </div>
                </details>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>No hay módulos o contenidos para esta materia.</p>
    {% endfor %}
</div>
{% endblock %}
